(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{358:function(t,e,v){"use strict";v.r(e);var _=v(0),a=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"正解"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#正解"}},[t._v("#")]),t._v(" 正解")]),t._v(" "),v("ol",[v("li",[t._v("根据地址栏输入的地址向DNS（Domain Name System）查询IP")]),t._v(" "),v("li",[t._v("通过IP向服务器发起TCP连接")]),t._v(" "),v("li",[t._v("向服务器发起请求")]),t._v(" "),v("li",[t._v("服务器返回请求内容")]),t._v(" "),v("li",[t._v("浏览器开始解析渲染页面并显示")]),t._v(" "),v("li",[t._v("关闭连接")])]),t._v(" "),v("h2",{attrs:{id:"分析-以及涉及的知识体系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#分析-以及涉及的知识体系"}},[t._v("#")]),t._v(" 分析(以及涉及的知识体系)")]),t._v(" "),v("h3",{attrs:{id:"步骤一"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#步骤一"}},[t._v("#")]),t._v(" 步骤一")]),t._v(" "),v("p",[v("strong",[t._v("从浏览器接收url到开启网络请求线程")])]),t._v(" "),v("p",[t._v("1、浏览器的进程：")]),t._v(" "),v("ul",[v("li",[t._v("Browser进程：浏览器的主进程（负责协调、主控），只有一个")]),t._v(" "),v("li",[t._v("第三方插件进程：每种类型的插件对应一个进程，仅当使用该插件时才创建")]),t._v(" "),v("li",[t._v("GPU进程：最多一个，用于3D绘制")]),t._v(" "),v("li",[t._v("浏览器渲染进程（内核）：默认每个Tab页面一个进程，互不影响，控制页面渲染，脚本执行，事件处理等（有时候会优化，如多个空白tab会合并成一个进程）")])]),t._v(" "),v("p",[t._v("2、多线程的浏览器内核")]),t._v(" "),v("ul",[v("li",[t._v("GUI线程")]),t._v(" "),v("li",[t._v("JS引擎线程")]),t._v(" "),v("li",[t._v("事件触发线程")]),t._v(" "),v("li",[t._v("定时器线程")]),t._v(" "),v("li",[t._v("网络请求线程")])]),t._v(" "),v("p",[v("strong",[t._v("DNS查询得到IP")])]),t._v(" "),v("p",[t._v("大致流程：")]),t._v(" "),v("ul",[v("li",[t._v("如果浏览器有缓存，直接使用浏览器缓存，否则使用本机缓存，再没有的话就是用host")]),t._v(" "),v("li",[t._v("如果本地没有，就向dns域名服务器查询（当然，中间可能还会经过路由，也有缓存等），查询到对应的IP")])]),t._v(" "),v("h3",{attrs:{id:"步骤二"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#步骤二"}},[t._v("#")]),t._v(" 步骤二")]),t._v(" "),v("p",[v("strong",[t._v("TCP将http长报文划分为短报文，通过三次握手与服务端建立连接，进行可靠传输")])]),t._v(" "),v("p",[t._v("连接：三次握手(抽象理解)"),v("br"),t._v("\n客户端：hello，你是server么？"),v("br"),t._v("\n服务端：hello，我是server，你是client么"),v("br"),t._v("\n客户端：yes，我是client")]),t._v(" "),v("p",[t._v("断开连接： 四次挥手(抽象理解)"),v("br"),t._v("\n主动方：我已经关闭了向你那边的主动通道了，只能被动接收了"),v("br"),t._v("\n被动方：收到通道关闭的信息"),v("br"),t._v("\n被动方：那我也告诉你，我这边向你的主动通道也关闭了"),v("br"),t._v("\n主动方：最后收到数据，之后双方无法通信")]),t._v(" "),v("p",[v("strong",[t._v("get和post区别")])]),t._v(" "),v("p",[t._v("浏览器对同一域名下并发的tcp连接是有限制的（2-10个不等），get和post是资源优化方案")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("比较项")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("get")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("post")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("具体")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("产生数据包")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("一个")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("两个")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("get请求时，浏览器会把headers和data一起发送出去，服务器响应200（返回数据）  post请求时，浏览器先发送headers，服务器响应100 continue，浏览器再发送data，服务器响应200（返回数据）")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("参数传递")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("通过URL")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("放在request body中")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("请求参数")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("长度有限制，会被完整保存在浏览器的历史记录中")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("无限制，不保留")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("浏览器回退时")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("不发请求")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("再次请求")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("因为浏览器会对get请求主动缓存，post不会，除非手动设置")])])])]),t._v(" "),v("h3",{attrs:{id:"步骤三-步骤四"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-步骤四"}},[t._v("#")]),t._v(" 步骤三/步骤四")]),t._v(" "),v("p",[v("strong",[t._v("前/后端交互")])]),t._v(" "),v("p",[t._v("1、http报文结构"),v("br"),t._v("\n报文一般包括了："),v("code",[t._v("通用头部")]),t._v("，"),v("code",[t._v("请求/响应头部")]),t._v("，"),v("code",[t._v("请求/响应体")])]),t._v(" "),v("p",[t._v("2、通用头部")]),t._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[t._v("Request Url"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 请求的web服务器地址\nRequest Method"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 请求方式（Get、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OPTIONS")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HEAD")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONNECT")]),t._v("、"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TRACE")]),t._v("）\nStatus Code"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 请求的返回状态码，如"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("代表成功\nRemote Address"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 请求的远程服务器地址（会转为"),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v("）\n")])])]),v("ul",[v("li",[t._v("状态码：")])]),t._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("xx——指示信息，表示请求已接收，继续处理\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("xx——成功，表示请求已被成功接收、理解、接受\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("xx——重定向，要完成请求必须进行更进一步的操作\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("xx——客户端错误，请求有语法错误或请求无法实现\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("xx——服务器端错误，服务器未能实现合法的请求\n")])])]),v("ul",[v("li",[t._v("常用状态码")])]),t._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("——表明该请求被成功地完成，所请求的资源发送回客户端\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("304")]),t._v("——自从上次请求后，请求的网页未修改过，请客户端使用本地缓存\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v("——客户端请求有错（譬如可以是安全模块拦截）\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),t._v("——请求未经授权\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),t._v("——禁止访问（譬如可以是未登录时禁止）\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v("——资源未找到\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v("——服务器内部错误\n"),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v("——服务不可用\n")])])]),v("p",[t._v("3、请求/响应头部"),v("br"),t._v("\n分析方法：")]),t._v(" "),v("ul",[v("li",[t._v("请求头部的Accept要和响应头部的Content-Type匹配，否则会报错")]),t._v(" "),v("li",[t._v("跨域请求时，请求头部的Origin要匹配响应头部的Access-Control-Allow-Origin，否则会报跨域错误")]),t._v(" "),v("li",[t._v("在使用缓存时，请求头部的If-Modified-Since、If-None-Match分别和响应头部的Last-Modified、ETag对应")])]),t._v(" "),v("p",[t._v("4、请求/响应体")]),t._v(" "),v("ul",[v("li",[t._v("请求实体:将一些需要的参数都放入（用于post请求）")]),t._v(" "),v("li",[t._v("响应实体:放服务端需要传给客户端的内容")])]),t._v(" "),v("p",[v("strong",[t._v("缓存")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6ly1g7ymsxidytj31ao0tg0xm.jpg",alt:"缓存头部"}})]),t._v(" "),v("p",[t._v("如果同时启用了Cache-Control与Expires，Cache-Control优先级高"),v("br"),t._v("\n如果同时带有E-tag和Last-Modified，服务端会优先检查E-tag")]),t._v(" "),v("h3",{attrs:{id:"步骤五"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#步骤五"}},[t._v("#")]),t._v(" 步骤五")]),t._v(" "),v("p",[t._v("1、渲染步骤")]),t._v(" "),v("ul",[v("li",[t._v("解析HTML，构建DOM树")]),t._v(" "),v("li",[t._v("解析CSS，生成CSS规则树")]),t._v(" "),v("li",[t._v("合并DOM树和CSS规则，生成rende树")]),t._v(" "),v("li",[t._v("布局render树（Layout/reflow），负责各元素尺寸、位置的计算")]),t._v(" "),v("li",[t._v("绘制render树（paint），绘制页面像素信息")]),t._v(" "),v("li",[t._v("浏览器会将各层的信息发送给GPU，GPU会将各层合成（composite），显示在屏幕上")])]),t._v(" "),v("p",[t._v("2、回流和重绘")]),t._v(" "),v("p",[t._v("引起回流：")]),t._v(" "),v("ul",[v("li",[t._v("页面渲染初始化")]),t._v(" "),v("li",[t._v("DOM结构改变，比如删除了某个节点")]),t._v(" "),v("li",[t._v("render树变化，比如减少了padding")]),t._v(" "),v("li",[t._v("窗口resize")]),t._v(" "),v("li",[t._v("最复杂的一种：获取某些属性，引发回流，\n很多浏览器会对回流做优化，会等到数量足够时做一次批处理回流，"),v("br"),t._v("\n但是除了render树的直接变化，当获取一些属性时，浏览器为了获得正确的值也会触发回流，这样使得浏览器优化无效，包括\n(1) offset(Top/Left/Width/Height)"),v("br"),t._v("\n(2) scroll(Top/Left/Width/Height)"),v("br"),t._v("\n(3) cilent(Top/Left/Width/Height)"),v("br"),t._v("\n(4) width,height"),v("br"),t._v("\n(5) 调用了getComputedStyle()或者IE的currentStyle")])]),t._v(" "),v("p",[t._v("减少回流：")]),t._v(" "),v("ul",[v("li",[t._v("减少逐项更改样式，最好一次性更改style，或者将样式定义为class并一次性更新")]),t._v(" "),v("li",[t._v("避免循环操作dom，创建一个documentFragment或div，在它上面应用所有DOM操作，最后再把它添加到window.document")]),t._v(" "),v("li",[t._v("避免多次读取offset等属性。无法避免则将它们缓存到变量")]),t._v(" "),v("li",[t._v("将复杂的元素绝对定位或固定定位，使得它脱离文档流，否则回流代价会很高")])]),t._v(" "),v("p",[t._v("3、BFC(块级格式化上下文)")]),t._v(" "),v("p",[t._v("BFC特点：")]),t._v(" "),v("ul",[v("li",[t._v("内部box在垂直方向，一个接一个的放置")]),t._v(" "),v("li",[t._v("box的垂直方向由margin决定，属于同一个BFC的两个box间的margin会重叠")]),t._v(" "),v("li",[t._v("BFC区域不会与float box重叠（可用于排版)")]),t._v(" "),v("li",[t._v("BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此")]),t._v(" "),v("li",[t._v("计算BFC的高度时，浮动元素也参与计算（不会浮动坍塌）")])]),t._v(" "),v("p",[t._v("触发BFC：")]),t._v(" "),v("ul",[v("li",[t._v("根元素")]),t._v(" "),v("li",[t._v("float属性不为none")]),t._v(" "),v("li",[t._v("position为absolute或fixed")]),t._v(" "),v("li",[t._v("display为inline-block, flex, inline-flex，table，table-cell，table-caption")]),t._v(" "),v("li",[t._v("overflow不为visible")])]),t._v(" "),v("h2",{attrs:{id:"参考链接"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),v("p",[v("a",{attrs:{href:"https://segmentfault.com/a/1190000013662126",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://segmentfault.com/a/1190000013662126"),v("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);